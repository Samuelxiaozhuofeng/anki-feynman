"""
This module contains translations for the Feynman Learning Method add-on.
"""

from typing import Dict
from aqt import mw

# 支持的语言
SUPPORTED_LANGUAGES = ["zh_CN", "en_US"]

def get_default_lang() -> str:
    """
    根据Anki的语言设置返回插件的默认语言
    如果Anki是中文，返回zh_CN，否则返回en_US
    """
    anki_lang = mw.pm.meta.get("defaultLang", "en")  # 获取Anki的语言设置
    return "zh_CN" if anki_lang.startswith("zh") else "en_US"

# 默认语言
DEFAULT_LANG = get_default_lang()

# 翻译字典
translations: Dict[str, Dict[str, str]] = {
    "zh_CN": {
        "menu_create": "创建费曼笔记",
        "menu_review": "复习费曼笔记",
        "menu_settings": "设置",
        "btn_save": "保存",
        "btn_cancel": "取消",
        "label_topic": "主题",
        "label_content": "内容",
        "settings_title": "费曼学习法设置",
        "language": "语言",
        "settings_window_title": "费曼学习法 - 设置",
        "ai_provider": "AI服务提供商",
        "custom_ai": "自定义AI服务",
        "openai_settings": "OpenAI设置",
        "custom_settings": "自定义AI服务设置",
        "common_settings": "通用设置",
        "model": "模型",
        "model_name": "模型名称",
        "max_tokens": "最大Token数",
        "temperature": "温度",
        "test_connection": "测试连接",
        "settings_saved": "设置已保存",
        "connection_success": "连接测试成功！",
        "connection_failed": "连接测试失败：",
        "enter_api_key": "请输入OpenAI API Key",
        "enter_api_info": "请输入API URL和API密钥",
        "openai_success": "OpenAI连接测试成功！",
        "custom_success": "自定义AI服务连接测试成功！",
        "openai_failed": "OpenAI连接失败：",
        "custom_failed": "自定义AI服务连接失败：",
        # Review窗口翻译
        "review_window_title": "费曼学习法 - 答题",
        "make_cloze_title": "制作填空卡",
        "question_group": "问题",
        "your_answer_group": "你的答案",
        "enter_answer_placeholder": "在此输入你的答案...",
        "submit_answer": "提交答案",
        "next_question": "下一题",
        "prev_question": "上一题",
        "add_to_anki": "添加到Anki",
        "auto_save": "自动保存到Anki",
        "make_cloze": "制作填空卡",
        "ai_feedback_group": "AI反馈",
        "follow_up_group": "追加提问",
        "follow_up_history_placeholder": "这里将显示追加问答的历史记录...",
        "follow_up_input_placeholder": "输入你的追加问题...",
        "ask_question": "提问",
        "original_content": "原始内容",
        "cloze_content": "填空内容（使用 {{c1::文本}} 格式添加填空）",
        "explanation": "解析",
        "add_cloze": "添加填空",
        "select_text_warning": "请先选择要制作为填空的文本",
        "no_content_warning": "没有可保存的内容",
        "save_success": "已成功保存到Anki",
        "save_error": "保存到Anki时出错：",
        "enter_answer_warning": "请输入你的答案",
        "make_qa": "制作问答题",
        "make_cloze_from_selection": "制作填空卡",
        "cloze_validation": "填空内容必须包含至少一个填空标记",
        "cloze_create_success": "填空卡创建成功！",
        "cloze_create_error": "创建填空卡时出错：",
        "qa_create_success": "已成功创建问答题卡片",
        "qa_create_error": "创建问答题卡片时出错：",
        "follow_up_error": "处理追加问题时出错：",
        # 新增翻译
        "please_explain": "请解释：",
        "answer_prefix": "答案：",
        "ai_feedback_prefix": "AI反馈：",
        "options_separator": "选项：\n",
        "question_prefix": "问：",
        "answer_prefix_qa": "答：",
        "needs_review": "需要复习",
        # Input窗口翻译
        "input_window_title": "费曼学习法 - 知识输入",
        "input_title": "输入要学习的内容",
        "input_placeholder": "在此输入要学习的文本内容...",
        "select_deck": "选择牌组：",
        "select_model": "AI模型",
        "select_followup_model": "追加提问AI",
        "default_model": "默认模型",
        "question_type": "问题类型：",
        "question_type_choice": "选择题",
        "question_type_qa": "问答题",
        "question_type_knowledge": "知识卡",
        "question_type_language_learning": "语言学习知识卡",
        "question_type_custom": "自定义",
        "select_language": "生成语言：",
        "language_chinese": "中文",
        "language_spanish": "Español (西班牙语)",
        "language_japanese": "日本語 (日语)",
        "language_custom": "自定义...",
        "custom_language_prompt": "请输入自定义语言",
        "custom_language_title": "自定义语言",
        "num_questions": "生成问题数：",
        "select_template": "选择模板：",
        "manage_templates": "管理模板",
        "generate_button": "生成问题",
        "input_content_warning": "请输入要学习的内容",
        "generation_error": "生成问题时出错：",
        "no_questions": "没有可用的问题",
        "all_questions_done": "所有问题已完成！",
        "question_number": "问题 {current}/{total}:",
        "correct_answer": "✓ 回答正确！",
        "wrong_answer": "✗ 回答错误",
        "score_prefix": "得分：",
        "feedback_prefix": "反馈：",
        "covered_points": "已掌握的要点：",
        "missing_points": "需要补充的要点：",
        "suggestions": "改进建议：",
        "knowledge_window_title": "费曼学习法 - 知识卡",
        "question_field": "问题",
        "answer_field": "答案",
        "context_field": "上下文",
        "add_to_anki_btn": "添加到Anki",
        "card_added_status": "✓ 已添加",
        "card_already_added": "此卡片已添加",
        "make_cloze_btn": "转换为填空题",
        "card_number": "卡片 {current}/{total}",
        "prev_card": "上一张",
        "next_card": "下一张",
        "preview_card": "预览",
        "knowledge_card_added": "知识卡已添加到Anki",
        "knowledge_card_add_error": "添加知识卡时出错：",
        "language_learning_card_added": "语言学习知识卡已添加到Anki",
        "language_learning_card_add_error": "添加语言学习知识卡时出错：",
        "select_cloze_text": "请选择要制作为填空的文本",
        "cloze_dialog_title": "制作填空卡",
        "cloze_preview": "填空卡预览",
        "cloze_instructions": '选择文本并点击"添加填空"按钮来创建填空',
        "add_cloze_marker": "添加填空",
        "save_cloze": "保存填空卡",
        # 追问功能相关
        "followup_area": "追问区域",
        "followup_placeholder": "输入你的追问...",
        "send_followup": "发送",
        "make_qa_card": "制作成问答卡",
        "make_cloze_card": "制作成填空卡",
        "card_created": "卡片创建成功！",
        # 模型管理相关
        "basic_settings": "基本设置",
        "model_management": "模型管理",
        "model_management_info": "在此页面可以管理多个AI模型。这些模型将使用基本设置页面中的自定义API信息进行连接。您只需要输入模型名称即可。",
        "model_list": "模型列表",
        "add_model": "添加模型",
        "edit_model": "编辑模型",
        "delete_model": "删除模型",
        "test_model": "测试模型",
        "model_edit": "模型编辑",
        "provider": "提供商",
        "api_url": "API地址",
        "api_key": "API密钥",
        "save_model": "保存模型",
        "cancel": "取消",
        "select_model": "请先选择一个模型",
        "fill_all_fields": "请填写模型名称",
        "missing_api_info": "请先在基本设置页面中填写自定义API信息",
        "not_tested": "未测试",
        "other": "其他",
        "status": "状态",
        # 提示词模板管理相关消息
        "template_manager_title": "提示词模板管理",
        "template_manager_description": "在这里你可以管理自定义的提示词模板。每个模板都可以定义特定的问题生成规则，帮助你获得更符合需求的问题。",
        "add_template": "添加模板",
        "edit_template": "编辑模板",
        "delete_template": "删除模板",
        "close": "关闭",
        "no_templates_placeholder": '暂无模板，点击"添加模板"创建一个新的模板',
        "confirm_delete_title": "确认删除",
        "confirm_delete_template": '确定要删除模板"{template_name}"吗？此操作不可撤销。',
        "template_name": "模板名称",
        "template_name_placeholder": "输入模板名称",
        "template_card_type": "卡片类型",
        "template_card_type_choice": "选择题",
        "template_card_type_knowledge": "知识卡",
        "template_card_type_essay": "问答题",
        "template_content": "模板内容",
        "template_content_placeholder": "输入提示词模板内容。使用{content}表示学习内容。问题数量将在外部设置，无需在模板中指定。",
        "template_editor_description": "在这里编辑提示词模板。提示词模板决定了AI如何生成问题。你只需要关注问题的内容和要求，不需要考虑返回格式。",
        "example_tab": "示例",
        "help_tab": "帮助",
        "template_example_description": "这是一个示例提示词模板，展示了如何设计一个好的提示词：",
        "template_help_description": "提示词模板编写指南",
        "template_help_tips": "<h3>如何编写好的提示词模板？</h3><p>一个好的提示词模板应该：</p><ul><li>明确指定问题的难度和深度要求</li><li>说明是否需要解释或分析</li><li>指定是否需要源内容引用</li><li>注意：问题数量由外部设置控制，无需在模板中指定</li></ul><h3>可用变量</h3><ul><li>{content} - 将替换为学习内容</li></ul><h3>选择题示例</h3><pre>请基于以下内容设计选择题，确保每个题目覆盖不同的概念，\n选项要有足够的干扰性，使学生必须真正理解概念才能选对。\n每个题目都应包含一个简短的解释。\n\n内容：\n{content}</pre><h3>知识卡示例</h3><pre>请基于以下内容生成知识卡，每张卡片应该：\n1. 问题简洁明确\n2. 答案详细准确\n3. 包含必要的上下文信息\n\n内容：\n{content}</pre><h3>问答题示例</h3><pre>请基于以下内容设计开放性问答题，要求：\n1. 问题能引发深度思考\n2. 提供参考答案和关键要点\n3. 标注相关的原文段落\n\n内容：\n{content}</pre>",
        "save_template": "保存模板",
        "template_name_required": "请输入模板名称",
        "template_content_required": "请输入模板内容",
        "edit_template_title": "编辑提示词模板",
        "add_template_title": "添加提示词模板",
        # 新增追加提问包含在卡片中的翻译
        "include_followup_in_card": "将追加提问内容包含到卡片中",
        "followup_content_header": "追加提问内容：",
        "enter_model_name": "请输入模型名称",
        "claude_model_notice": "已为Claude模型设置特殊参数：增加超时时间和限制Token数量，这有助于提高连接稳定性。",

        # PDF相关消息
        "pdf_import": "PDF导入",
        "pdf_library": "PDF库",
        "pdf_import_title": "导入PDF文档",
        "pdf_library_title": "PDF文档库",
        "pypdf_not_available": "pypdf库未安装，无法使用PDF导入功能",
        "pdf_import_info": "选择PDF文件并导入到文档库中，以便后续生成题目时使用。",
        "select_pdf_file": "选择PDF文件",
        "no_file_selected": "未选择文件",
        "browse": "浏览",
        "pdf_info": "PDF信息",
        "pdf_title": "标题",
        "pdf_pages": "页数",
        "pdf_size": "文件大小",
        "import_pdf": "导入PDF",
        "cancel": "取消",
        "close": "关闭",
        "loading_pdf_info": "正在加载PDF信息...",
        "pdf_info_loaded": "PDF信息加载完成",
        "pdf_load_error": "PDF加载错误",
        "pdf_load_failed": "PDF加载失败",
        "unexpected_error": "意外错误",
        "importing_pdf": "正在导入PDF...",
        "pdf_imported_success": "PDF导入成功",
        "pdf_import_error": "PDF导入错误",
        "pdf_import_failed": "PDF导入失败",
        "pdf_added_to_library": "PDF已添加到文档库",
        "refresh": "刷新",
        "cleanup_invalid": "清理无效文档",
        "search": "搜索",
        "search_pdf_placeholder": "搜索PDF标题或文件名...",
        "pdf_details_and_pages": "PDF详情和页码选择",
        "select_pdf_first": "请先选择一个PDF文档",
        "start_page": "起始页",
        "end_page": "结束页",
        "preview_page": "预览页面",
        "generate_questions": "生成题目",
        "no_pdfs_in_library": "文档库为空，请先导入PDF文档",
        "pages": "页",
        "no_matching_pdfs": "没有找到匹配的PDF文档",
        "title": "标题",
        "file_name": "文件名",
        "file_size": "文件大小",
        "added_date": "添加日期",
        "valid_page_range": "有效页码范围",
        "invalid_page_range": "无效页码范围",
        "page_preview": "页面预览",
        "page": "页",
        "preview_error": "预览错误",
        "confirm_cleanup_invalid": "确定要清理所有无效的PDF记录吗？",
        "cleanup_completed": "清理完成，已移除记录",
        "no_invalid_pdfs": "没有发现无效的PDF记录",
        "extracting_pdf_text": "正在提取PDF文本...",
        "pdf_extraction_completed": "PDF文本提取完成",
        "pdf_extraction_failed": "PDF文本提取失败",
        "preview_range": "预览范围",
        "page_range_preview": "页码范围预览",
        "preview_range_info": "以下显示所选页码范围的开头和结尾文本，帮助您确认选择是否正确：",
        "beginning_text": "开头文本",
        "ending_text": "结尾文本",
        "same_page_ending": "页面结尾",
        "total_pages_in_range": "范围内总页数",
        
        # Advanced settings
        "advanced_settings": "额外设置",
        "concurrent_processing": "并发处理",
        "text_chunking": "文本分块",
        "enable_concurrent": "启用并发处理",
        "max_concurrent_requests": "最大并发请求数",
        "concurrent_desc": "启用后可同时发送多个API请求，加快处理速度。建议根据API限制设置（如OpenAI建议3-5）。",
        "enable_chunking": "启用文本分块",
        "chunk_size": "分块大小（字符数）",
        "chunk_overlap": "重叠字符数",
        "chunk_strategy": "分块策略",
        "chunk_strategy_simple": "简单分块",
        "chunk_strategy_smart": "智能分块",
        "chunking_desc": "长文本会被分成多块处理。智能分块会在段落/句子边界分割，保持内容连贯性。",
        "chunk_size_desc": "每块的字符数。建议1000-4000，根据模型token限制调整。",
        "chunk_overlap_desc": "相邻分块之间的重叠字符数，有助于保持上下文连贯。",
        "processing_status": "处理中...",
        "chunk_progress": "正在处理分块 {current}/{total}",
        "concurrent_requests": "并发请求 {current}/{max}",
        
        # Model-specific settings
        "model_specific_settings": "模型特定设置",
        "model_specific_settings_desc": "为特定模型单独配置并发数和分块大小，覆盖全局默认设置",
        "select_model_for_settings": "选择模型",
        "use_model_specific": "使用模型特定设置",
        "model_concurrent_requests": "该模型的并发请求数",
        "model_chunk_size": "该模型的分块大小",
        "save_model_settings": "保存模型设置",
        "delete_model_settings": "删除模型设置",
        "model_settings_saved": "模型特定设置已保存",
        "model_settings_deleted": "模型特定设置已删除",
        "no_model_selected": "请先选择一个模型",
        "configured_models": "已配置的模型",
        "model_settings_table_model": "模型名称",
        "model_settings_table_concurrent": "并发数",
        "model_settings_table_chunk": "分块大小",
        "api_settings": "API设置",
        "use_default_api": "使用默认API设置",
        "custom_api_settings": "自定义API设置"
    },
    "en_US": {
        "menu_create": "Create Feynman Note",
        "menu_review": "Review Feynman Notes",
        "menu_settings": "Settings",
        "btn_save": "Save",
        "btn_cancel": "Cancel",
        "label_topic": "Topic",
        "label_content": "Content",
        "settings_title": "Feynman Learning Method Settings",
        "language": "Language",
        "settings_window_title": "Feynman Learning Method - Settings",
        "ai_provider": "AI Service Provider",
        "custom_ai": "Custom AI Service",
        "openai_settings": "OpenAI Settings",
        "custom_settings": "Custom AI Service Settings",
        "common_settings": "Common Settings",
        "model": "Model",
        "model_name": "Model Name",
        "max_tokens": "Max Tokens",
        "temperature": "Temperature",
        "test_connection": "Test Connection",
        "settings_saved": "Settings saved",
        "connection_success": "Connection test successful!",
        "connection_failed": "Connection test failed: ",
        "enter_api_key": "Please enter OpenAI API Key",
        "enter_api_info": "Please enter API URL and API Key",
        "openai_success": "OpenAI connection test successful!",
        "custom_success": "Custom AI service connection test successful!",
        "openai_failed": "OpenAI connection test failed: ",
        "custom_failed": "Custom AI service connection test failed: ",
        # Review window translations
        "review_window_title": "Feynman Learning Method - Review",
        "make_cloze_title": "Create Cloze Card",
        "question_group": "Question",
        "your_answer_group": "Your Answer",
        "enter_answer_placeholder": "Enter your answer here...",
        "submit_answer": "Submit Answer",
        "next_question": "Next Question",
        "prev_question": "Previous Question",
        "add_to_anki": "Add to Anki",
        "auto_save": "Auto Save to Anki",
        "make_cloze": "Create Cloze Card",
        "ai_feedback_group": "AI Feedback",
        "follow_up_group": "Follow-up Questions",
        "follow_up_history_placeholder": "Follow-up Q&A history will be displayed here...",
        "follow_up_input_placeholder": "Enter your follow-up question...",
        "ask_question": "Ask",
        "original_content": "Original Content",
        "cloze_content": "Cloze Content (Use {{c1::text}} format to add cloze)",
        "explanation": "Explanation",
        "add_cloze": "Add Cloze",
        "select_text_warning": "Please select text to make cloze",
        "no_content_warning": "No content to save",
        "save_success": "Successfully saved to Anki",
        "save_error": "Error saving to Anki: ",
        "enter_answer_warning": "Please enter your answer",
        "make_qa": "Create Q&A Card",
        "make_cloze_from_selection": "Create Cloze Card",
        "cloze_validation": "Cloze content must contain at least one cloze marker",
        "cloze_create_success": "Cloze card created successfully!",
        "cloze_create_error": "Error creating cloze card: ",
        "qa_create_success": "Q&A card created successfully",
        "qa_create_error": "Error creating Q&A card: ",
        "follow_up_error": "Error processing follow-up question: ",
        # New translations
        "please_explain": "Please explain: ",
        "answer_prefix": "Answer: ",
        "ai_feedback_prefix": "AI Feedback: ",
        "options_separator": "Options:\n",
        "question_prefix": "Q: ",
        "answer_prefix_qa": "A: ",
        "needs_review": "Needs Review",
        # Input window translations
        "input_window_title": "Feynman Learning Method - Input",
        "input_title": "Enter Content to Learn",
        "input_placeholder": "Enter the text content to learn here...",
        "select_deck": "Select Deck:",
        "select_model": "AI Model",
        "select_followup_model": "Follow-up AI",
        "default_model": "Default Model",
        "question_type": "Question Type:",
        "question_type_choice": "Multiple Choice",
        "question_type_qa": "Q&A",
        "question_type_knowledge": "Knowledge Card",
        "question_type_language_learning": "Language Learning Card",
        "question_type_custom": "Custom",
        "select_language": "Generate Language:",
        "language_chinese": "Chinese",
        "language_spanish": "Español (Spanish)",
        "language_japanese": "日本語 (Japanese)",
        "language_custom": "Custom...",
        "custom_language_prompt": "Please enter custom language",
        "custom_language_title": "Custom Language",
        "num_questions": "Number of Questions:",
        "select_template": "Select Template:",
        "manage_templates": "Manage Templates",
        "generate_button": "Generate Questions",
        "input_content_warning": "Please enter content to learn",
        "generation_error": "Error generating questions: ",
        "no_questions": "No questions available",
        "all_questions_done": "All questions completed!",
        "question_number": "Question {current}/{total}:",
        "correct_answer": "✓ Correct answer!",
        "wrong_answer": "✗ Wrong answer",
        "score_prefix": "Score: ",
        "feedback_prefix": "Feedback: ",
        "covered_points": "Points covered:",
        "missing_points": "Points to add:",
        "suggestions": "Suggestions for improvement:",
        "knowledge_window_title": "Feynman Learning Method - Knowledge Cards",
        "question_field": "Question",
        "answer_field": "Answer",
        "context_field": "Context",
        "add_to_anki_btn": "Add to Anki",
        "card_added_status": "✓ Added",
        "card_already_added": "This card has already been added",
        "make_cloze_btn": "Convert to Cloze",
        "card_number": "Card {current}/{total}",
        "prev_card": "Previous",
        "next_card": "Next",
        "preview_card": "Preview",
        "knowledge_card_added": "Knowledge card has been added to Anki",
        "knowledge_card_add_error": "Error adding knowledge card: ",
        "language_learning_card_added": "Language learning card has been added to Anki",
        "language_learning_card_add_error": "Error adding language learning card: ",
        "select_cloze_text": "Please select text to make cloze",
        "cloze_dialog_title": "Create Cloze Card",
        "cloze_preview": "Cloze Card Preview",
        "cloze_instructions": "Select text and click 'Add Cloze' button to create cloze deletions",
        "add_cloze_marker": "Add Cloze",
        "save_cloze": "Save Cloze Card",
        # 追问功能相关
        "followup_area": "Follow-up Questions",
        "followup_placeholder": "Enter your follow-up question...",
        "send_followup": "Send",
        "make_qa_card": "Make Q&A Card",
        "make_cloze_card": "Make Cloze Card",
        "card_created": "Card created successfully!",
        # 模型管理相关
        "basic_settings": "Basic Settings",
        "model_management": "Model Management",
        "model_management_info": "Manage multiple AI models here. These models will use the custom API information from the Basic Settings page. You only need to enter the model name.",
        "model_list": "Model List",
        "add_model": "Add Model",
        "edit_model": "Edit Model",
        "delete_model": "Delete Model",
        "test_model": "Test Model",
        "model_edit": "Model Edit",
        "provider": "Provider",
        "api_url": "API URL",
        "api_key": "API Key",
        "save_model": "Save Model",
        "cancel": "Cancel",
        "select_model": "Please select a model first",
        "fill_all_fields": "Please enter the model name",
        "missing_api_info": "Please fill in the custom API information in the Basic Settings page first",
        "not_tested": "Not Tested",
        "other": "Other",
        "status": "Status",
        # 提示词模板管理相关消息
        "template_manager_title": "Prompt Template Manager",
        "template_manager_description": "Manage your custom prompt templates here. Each template can define specific question generation rules to help you get questions that better meet your needs.",
        "add_template": "Add Template",
        "edit_template": "Edit Template",
        "delete_template": "Delete Template",
        "close": "Close",
        "no_templates_placeholder": 'No templates yet, click "Add Template" to create a new one',
        "confirm_delete_title": "Confirm Delete",
        "confirm_delete_template": 'Are you sure you want to delete template "{template_name}"? This action cannot be undone.',
        "template_name": "Template Name",
        "template_name_placeholder": "Enter template name",
        "template_card_type": "Card Type",
        "template_card_type_choice": "Multiple Choice",
        "template_card_type_knowledge": "Knowledge Card",
        "template_card_type_essay": "Essay Question",
        "template_content": "Template Content",
        "template_content_placeholder": "Enter prompt template content. Use {content} to represent learning content. Question count will be set externally, no need to specify in template.",
        "template_editor_description": "Edit prompt template here. The prompt template determines how AI generates questions. You only need to focus on the content and requirements of the questions, not the return format.",
        "example_tab": "Example",
        "help_tab": "Help",
        "template_example_description": "This is an example prompt template showing how to design a good prompt:",
        "template_help_description": "Prompt Template Writing Guide",
        "template_help_tips": "<h3>How to Write Good Prompt Templates?</h3><p>A good prompt template should:</p><ul><li>Clearly specify difficulty and depth requirements</li><li>Indicate whether explanations or analysis are needed</li><li>Specify if source content references are required</li><li>Note: Question count is controlled externally, no need to specify in template</li></ul><h3>Available Variables</h3><ul><li>{content} - Will be replaced with the learning content</li></ul><h3>Multiple Choice Example</h3><pre>Please design multiple choice questions based on the following content, ensuring each question covers different concepts,\noptions are sufficiently distracting so students must truly understand concepts to choose correctly.\nEach question should include a brief explanation.\n\nContent:\n{content}</pre><h3>Knowledge Card Example</h3><pre>Please generate knowledge cards based on the following content, each card should:\n1. Have a concise and clear question\n2. Provide detailed and accurate answer\n3. Include necessary context information\n\nContent:\n{content}</pre><h3>Essay Question Example</h3><pre>Please design open-ended essay questions based on the following content, requirements:\n1. Questions should provoke deep thinking\n2. Provide reference answers and key points\n3. Mark relevant original text passages\n\nContent:\n{content}</pre>",
        "save_template": "Save Template",
        "template_name_required": "Please enter template name",
        "template_content_required": "Please enter the template content",
        "edit_template_title": "Edit Prompt Template",
        "add_template_title": "Add Prompt Template",
        # 新增追加提问包含在卡片中的翻译
        "include_followup_in_card": "Include follow-up questions in card",
        "followup_content_header": "Follow-up content:",
        "enter_model_name": "Please enter the model name",
        "claude_model_notice": "Special settings have been configured for Claude model: increased timeout and limited token count to improve connection stability.",

        # PDF related messages
        "pdf_import": "PDF Import",
        "pdf_library": "PDF Library",
        "pdf_import_title": "Import PDF Document",
        "pdf_library_title": "PDF Document Library",
        "pypdf_not_available": "pypdf library is not installed, PDF import feature is unavailable",
        "pdf_import_info": "Select a PDF file and import it to the document library for later question generation.",
        "select_pdf_file": "Select PDF File",
        "no_file_selected": "No file selected",
        "browse": "Browse",
        "pdf_info": "PDF Information",
        "pdf_title": "Title",
        "pdf_pages": "Pages",
        "pdf_size": "File Size",
        "import_pdf": "Import PDF",
        "cancel": "Cancel",
        "close": "Close",
        "loading_pdf_info": "Loading PDF information...",
        "pdf_info_loaded": "PDF information loaded",
        "pdf_load_error": "PDF loading error",
        "pdf_load_failed": "PDF loading failed",
        "unexpected_error": "Unexpected error",
        "importing_pdf": "Importing PDF...",
        "pdf_imported_success": "PDF imported successfully",
        "pdf_import_error": "PDF import error",
        "pdf_import_failed": "PDF import failed",
        "pdf_added_to_library": "PDF added to library",
        "refresh": "Refresh",
        "cleanup_invalid": "Cleanup Invalid",
        "search": "Search",
        "search_pdf_placeholder": "Search PDF title or filename...",
        "pdf_details_and_pages": "PDF Details and Page Selection",
        "select_pdf_first": "Please select a PDF document first",
        "start_page": "Start Page",
        "end_page": "End Page",
        "preview_page": "Preview Page",
        "generate_questions": "Generate Questions",
        "no_pdfs_in_library": "Library is empty, please import PDF documents first",
        "pages": "pages",
        "no_matching_pdfs": "No matching PDF documents found",
        "title": "Title",
        "file_name": "File Name",
        "file_size": "File Size",
        "added_date": "Added Date",
        "valid_page_range": "Valid page range",
        "invalid_page_range": "Invalid page range",
        "page_preview": "Page Preview",
        "page": "Page",
        "preview_error": "Preview error",
        "confirm_cleanup_invalid": "Are you sure you want to cleanup all invalid PDF records?",
        "cleanup_completed": "Cleanup completed, removed records",
        "no_invalid_pdfs": "No invalid PDF records found",
        "extracting_pdf_text": "Extracting PDF text...",
        "pdf_extraction_completed": "PDF text extraction completed",
        "pdf_extraction_failed": "PDF text extraction failed",
        "preview_range": "Preview Range",
        "page_range_preview": "Page Range Preview",
        "preview_range_info": "The following shows the beginning and ending text of the selected page range to help you confirm your selection:",
        "beginning_text": "Beginning Text",
        "ending_text": "Ending Text",
        "same_page_ending": "Page Ending",
        "total_pages_in_range": "Total Pages in Range",
        
        # Advanced settings
        "advanced_settings": "Advanced Settings",
        "concurrent_processing": "Concurrent Processing",
        "text_chunking": "Text Chunking",
        "enable_concurrent": "Enable Concurrent Processing",
        "max_concurrent_requests": "Max Concurrent Requests",
        "concurrent_desc": "When enabled, multiple API requests can be sent simultaneously for faster processing. Recommended based on API limits (e.g., OpenAI suggests 3-5).",
        "enable_chunking": "Enable Text Chunking",
        "chunk_size": "Chunk Size (characters)",
        "chunk_overlap": "Overlap Characters",
        "chunk_strategy": "Chunking Strategy",
        "chunk_strategy_simple": "Simple Chunking",
        "chunk_strategy_smart": "Smart Chunking",
        "chunking_desc": "Long texts will be split into chunks for processing. Smart chunking splits at paragraph/sentence boundaries to maintain coherence.",
        "chunk_size_desc": "Number of characters per chunk. Recommended 1000-4000, adjust based on model token limits.",
        "chunk_overlap_desc": "Number of overlapping characters between adjacent chunks to maintain context.",
        "processing_status": "Processing...",
        "chunk_progress": "Processing chunk {current}/{total}",
        "concurrent_requests": "Concurrent requests {current}/{max}",
        
        # Model-specific settings
        "model_specific_settings": "Model-Specific Settings",
        "model_specific_settings_desc": "Configure concurrent requests and chunk size for specific models to override global defaults",
        "select_model_for_settings": "Select Model",
        "use_model_specific": "Use Model-Specific Settings",
        "model_concurrent_requests": "Concurrent Requests for This Model",
        "model_chunk_size": "Chunk Size for This Model",
        "save_model_settings": "Save Model Settings",
        "delete_model_settings": "Delete Model Settings",
        "model_settings_saved": "Model-specific settings saved",
        "model_settings_deleted": "Model-specific settings deleted",
        "no_model_selected": "Please select a model first",
        "configured_models": "Configured Models",
        "model_settings_table_model": "Model Name",
        "model_settings_table_concurrent": "Concurrent",
        "model_settings_table_chunk": "Chunk Size",
        "api_settings": "API Settings",
        "use_default_api": "Use Default API Settings",
        "custom_api_settings": "Custom API Settings"
    }
}

def get_message(key: str, lang: str = DEFAULT_LANG) -> str:
    """
    获取指定语言的翻译文本
    
    Args:
        key: 翻译键值
        lang: 语言代码
    
    Returns:
        翻译后的文本，如果未找到则返回键值
    """
    if lang not in translations or key not in translations[lang]:
        return key
    return translations[lang][key] 