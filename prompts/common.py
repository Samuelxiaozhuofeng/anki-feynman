"""
公共提示词常量模块
包含所有提示词文件共享的常量、格式要求和工具函数
"""

# ============================================================================
# JSON格式要求
# ============================================================================

JSON_FORMAT_BASIC = """
重要：
1. 不要添加任何不属于JSON的额外文本、注释或解释
2. 不要使用Markdown代码块格式(```)，直接输出JSON
3. 确保所有字符串使用双引号，所有JSON对象和数组都有正确的开始和结束括号"""

JSON_FORMAT_DETAILED = """
JSON格式要求（非常重要）：
1. 返回的必须是合法的JSON格式
2. 不要添加任何代码块标记（如```json）
3. 特别注意JSON格式中的逗号、引号等标点符号的正确使用
4. 确保每个JSON对象和数组的开始和结束都有正确的括号
5. 每个属性后面都必须有逗号，除了最后一个属性
6. 所有字符串必须用双引号包围，不能用单引号
7. 当生成多个项目时，每个对象之间必须用逗号分隔
8. 检查生成的JSON是否完整，特别是在生成大量内容时
9. 确保每个对象的所有字段都正确闭合"""

JSON_COMPLIANCE_SHORT = "保证输出格式严格符合JSON规范，特别注意逗号、引号等标点符号的正确使用"

JSON_COMPLIANCE_FULL = "保证输出格式严格符合JSON规范，特别注意逗号、引号等标点符号的正确使用。确保所有字符串使用双引号，所有JSON对象和数组都有正确的开始和结束括号"

# ============================================================================
# 角色定义
# ============================================================================

ROLE_FEYNMAN_ASSISTANT = "你是一个基于费曼学习法的教学助手"

ROLE_EDUCATOR = "你是一个专业的教育内容开发者，精通费曼学习法"

ROLE_EVALUATOR = "你是一个专业的教育评估专家，精通费曼学习法"

ROLE_LANGUAGE_EXPERT = "你是一个专业的语言学习卡片制作专家"

ROLE_LEARNING_STRATEGIST = "你是一名顶级的学习策略师，专注于从非虚构类文本（non-fiction）中挖掘核心思想"

# ============================================================================
# 费曼学习法相关
# ============================================================================

FEYNMAN_PRINCIPLES_BRIEF = """运用费曼学习法的原则：
1. 使用简单、清晰的语言
2. 通过类比和实例来解释复杂概念
3. 确保解释逻辑连贯，层次分明"""

# ============================================================================
# 工具函数
# ============================================================================

def add_language_instruction(language: str, content_type: str = "内容") -> str:
    """
    生成语言指示文本
    
    Args:
        language: 目标语言
        content_type: 内容类型描述（如"问题、答案"、"所有内容"等）
    
    Returns:
        格式化的语言指示文本
    """
    return f"请使用{language}生成所有{content_type}。\n\n"

def format_with_language(template: str, language: str, content_type: str = "内容", **kwargs) -> str:
    """
    为模板添加语言指示并格式化
    
    Args:
        template: 提示词模板
        language: 目标语言
        content_type: 内容类型描述
        **kwargs: 模板格式化参数
    
    Returns:
        格式化后的完整提示词
    """
    language_instruction = add_language_instruction(language, content_type)
    return language_instruction + template.format(**kwargs)

# ============================================================================
# SuperMemo制卡原则（用于知识卡片）
# ============================================================================

SUPERMEMO_PRINCIPLES = """
1. 信息最小化原则：
   - 每张卡片只包含一个基本概念
   - 避免复杂的、多重的问题
   - 确保问题的独立性和完整性
   - 答案应该只包含一个关键的事实/名称/概念/术语

2. 语言表达原则：
   - 使用清晰简洁的语言
   - 避免使用模糊或歧义的词语
   - 问题必须具体且不含糊
   - 优先使用简单直接的表达方式

3. 内容处理原则：
   - 将复杂内容分解为独立的知识点
   - 对超过15个字的内容进行拆分和概括
   - 保持概念的完整性
   - 确保知识点的逻辑连贯性

4. 制卡流程原则：
   - 第一步：使用简单的语言改写原内容
   - 第二步：将内容分成独立的知识点
   - 第三步：基于知识点生成抽认卡
   - 第四步：检查并优化卡片质量
"""

